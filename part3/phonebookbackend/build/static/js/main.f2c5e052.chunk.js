(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=n(2),l=function(e){var t=e.persons,n=e.filterName,r=e.deleteObject,o=e.setPersons,c=e.setNotificationMessage;t=t.filter((function(e){return e.name.toLowerCase().includes(n)}));var u=function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&r(e.id).then((function(){o(t.filter((function(t){return e.id!==t.id}))),c({text:"Success: deleted ".concat(e.name),type:"success"}),setTimeout((function(){return c(null)}),5e3)})).catch((function(t){console.log(t),c({text:"Error: couldn't delete ".concat(e.name),type:"error"}),setTimeout((function(){return c(null)}),5e3)}))}};return a.a.createElement("div",null,t.map((function(e){return a.a.createElement("p",{key:e.name},e.name," ",e.number," ",a.a.createElement("button",{onClick:u(e)},"delete"))})))},i=function(e){var t=e.newName,n=e.newNumber,r=e.persons,o=e.setNewName,c=e.setNewNumber,u=e.setPersons,l=e.create,i=e.update,s=e.setNotificationMessage;return a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),r.map((function(e){return e.name})).includes(t)){if(window.confirm("".concat(t," is already added to phonebook, replace the old number with a new one?"))){var a=r.filter((function(e){return e.name===t}))[0];i(a.id,{name:t,number:n}).then((function(e){u(r.map((function(t){return t.id===a.id?e:t}))),s({text:"Success: updated ".concat(e.name),type:"success"}),setTimeout((function(){return s(null)}),5e3)})).catch((function(e){console.log(e),s({text:"Error: couldn't update ".concat(t),type:"error"}),setTimeout((function(){return s(null)}),5e3)}))}}else l({name:t,number:n}).then((function(e){u(r.concat(e)),s({text:"Success: added ".concat(e.name),type:"success"}),setTimeout((function(){return s(null)}),5e3)})).catch((function(e){console.log(e),s({text:"Error: couldn't add ".concat(t),type:"error"}),setTimeout((function(){return s(null)}),5e3)}));o(""),c("")}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:function(e){return o(e.target.value)},value:t})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:function(e){return c(e.target.value)},value:n})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},s=function(e){var t=e.nameFilter,n=e.setNameFilter;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{onChange:function(e){return n(e.target.value)},value:t}))},m=n(3),f=n.n(m),d="/api/persons",p=function(e){return f.a.post(d,e).then((function(e){return e.data}))},b=function(e,t){return f.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return f.a.delete("".concat(d,"/").concat(e))},E=function(e){var t=e.message;if(null===t)return null;var n={color:"error"===t.type?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return a.a.createElement("div",{className:t.type,style:n},t.text)},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),m=Object(u.a)(c,2),g=m[0],v=m[1],N=Object(r.useState)(""),w=Object(u.a)(N,2),y=w[0],j=w[1],O=Object(r.useState)(""),S=Object(u.a)(O,2),k=S[0],x=S[1],T=Object(r.useState)(null),C=Object(u.a)(T,2),P=C[0],F=C[1];return Object(r.useEffect)((function(){f.a.get(d).then((function(e){return e.data})).then((function(e){return o(e)})).catch((function(e){console.log(e),F({text:"Error: couldn't get the list of phonebook names from server.",type:"error"}),setTimeout((function(){return F(null)}),5e3)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(s,{nameFilter:k,setNameFilter:x}),a.a.createElement("h3",null,"add a new"),a.a.createElement(i,{persons:n,newName:g,newNumber:y,setNewName:v,setNewNumber:j,setPersons:o,create:p,update:b,setNotificationMessage:F}),a.a.createElement("br",null),a.a.createElement(E,{message:P}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(l,{filterName:k,persons:n,setPersons:o,deleteObject:h,setNotificationMessage:F}))};c.a.render(a.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f2c5e052.chunk.js.map